# Telegram通知效果示例

## 📱 实际接收效果

当订阅有更新时，你会在Telegram上收到以下内容：

---

### 1️⃣ 更新通知消息

```
🔄 Singbox配置更新通知

📦 版本: subscription_20260104_143025
⏰ 时间: 2026-01-04 14:30:25

📊 变更摘要:
• 新增服务器: 2 个
• 移除服务器: 1 个
• 配置更新: 5 个
• 服务器总数: 36 → 37

📁 生成的配置文件:
1️⃣ Pro V5.9 Updated (完整版)
2️⃣ Air V5.9 (个人简化版)
3️⃣ Air V7.8 (朋友分享版)

⬇️ 正在发送配置文件...
```

---

### 2️⃣ Pro配置文件

**文件名**: `Singbox_Pro_V5_9_Updated_20260104_143025.json`

**说明**:
```
📋 Pro V5.9 Updated
完整功能版，包含所有订阅服务器和自定义服务器
```

**用途**: 
- 主力设备使用
- 包含完整功能
- 保留自定义服务器

---

### 3️⃣ Air V5.9 配置文件

**文件名**: `Singbox_Air_V5_9_Generated.json`

**说明**:
```
📱 Air V5.9
个人简化版，保留AllServer组和自定义服务器
```

**特点**:
- ✅ 保留AllServer组（可手动选择所有服务器）
- ✅ 保留自定义服务器（SGNowaHomePlus, SGoffice）
- ❌ 移除应用路由组（YouTube, Netflix等）
- 适合日常轻量使用

---

### 4️⃣ Air V7.8 配置文件

**文件名**: `Singbox_Air_V7_8_Generated.json`

**说明**:
```
👥 Air V7.8
朋友分享版，已移除自定义服务器，可安全分享
```

**特点**:
- ✅ 完整的功能组
- ✅ 完整的路由规则
- ❌ 无自定义服务器
- 可以安全分享给朋友

---

## 🎯 使用场景

### 场景1: 日常更新

**时间**: 凌晨2:00（服务商更新服务器）

**你的操作**: 无需任何操作，睡觉中😴

**程序自动**:
1. 检测到订阅更新
2. 更新配置
3. 发送到Telegram

**早上醒来**: 
- 打开Telegram
- 看到更新通知
- 下载最新配置
- 导入到Singbox
- 完成！✅

---

### 场景2: 紧急更新

**情况**: 服务器IP被封，服务商紧急更换

**你的操作**: 
1. 收到Telegram通知（手机震动）
2. 立即下载新配置
3. 导入Singbox
4. 恢复网络连接

**耗时**: < 1分钟

---

### 场景3: 分享给朋友

**朋友**: "能给我你的代理配置吗？"

**你的操作**:
1. 打开Telegram
2. 找到最新的Air V7.8文件
3. 转发给朋友
4. 告诉他这是试用版

**优势**:
- ✅ 配置已经是最新的
- ✅ 已自动移除你的个人服务器
- ✅ 安全分享

---

## 📊 通知频率

### 正常情况

- **检查频率**: 每6小时一次（可配置）
- **通知频率**: 仅在有更新时发送
- **平均频率**: 每周1-2次（取决于服务商）

### 不会打扰你

- ❌ 没有更新时不发送通知
- ❌ 不会每6小时都发消息
- ✅ 只在真正有变化时通知

---

## 💡 实用技巧

### 1. 静音通知，不错过更新

在Telegram中:
- 右键Bot对话 → 静音通知
- 保留标记未读

**效果**:
- 收到更新时不会有声音
- 但会显示未读标记
- 方便的时候再查看

---

### 2. 快速访问

- 将Bot对话置顶
- 或添加到快捷访问

**效果**: 
- 需要配置时快速找到
- 不用翻聊天记录

---

### 3. 自动下载设置

在Telegram设置中：
- 数据和存储 → 自动下载媒体
- 设置为"WiFi时自动下载文档"

**效果**:
- 在家时自动下载配置
- 不用手动点击下载
- 节省流量

---

### 4. 历史配置查找

如果需要回滚到旧版本：
- 在Bot对话中搜索日期
- 找到对应日期的配置
- 下载使用

---

## 🔔 通知定制

### 修改通知内容

编辑 `src/telegram_notifier.py` 中的 `_format_update_message` 方法：

```python
def _format_update_message(self, version_name: str, changes: Optional[dict]) -> str:
    message = f"🎉 *配置已更新！*\n\n"  # 自定义标题
    # ... 添加你想要的内容
    return message
```

### 修改文件说明

编辑 `_get_file_caption` 方法：

```python
def _get_file_caption(self, file_path: Path) -> str:
    if "Pro" in filename:
        return "💼 专业版配置\n推荐主力设备使用"  # 自定义说明
    # ...
```

---

## 📈 使用统计（示例）

假设你的服务商每周更新2次：

**一个月内**:
- 检查次数: 120次（每6小时）
- 实际更新: 8次
- 接收通知: 8次
- 下载文件: 24个

**一年内**:
- 接收通知: 约100次
- 下载配置: 约300个
- 节省时间: 约50小时（无需手动检查）

---

## ⚠️ 注意事项

### 文件存储

- Telegram中的文件会占用存储空间
- 建议定期清理旧配置（保留最近3-5个版本）
- 可以下载后删除Telegram中的文件

### 网络要求

- 需要能访问 `api.telegram.org`
- 如在国内部署，可能需要代理
- Zeabur等海外平台无此问题

### 隐私安全

- Bot Token要保密
- 不要在公开仓库中暴露
- 定期检查Bot的对话列表

---

## 🎓 进阶玩法

### 1. 添加交互命令

让Bot响应命令：
- `/status` - 查看当前状态
- `/check` - 立即检查更新
- `/latest` - 获取最新配置

### 2. 分组发送

- 创建"代理配置更新"群组
- 多个设备同时接收
- 家人朋友共享更新

### 3. 自动化流程

- Telegram收到文件
- 自动上传到云盘
- 触发设备自动更新配置

---

## ❓ 常见问题

**Q: 可以同时发送给多个人吗？**
A: 创建群组，将需要接收的人都加入即可。

**Q: 如果错过了通知怎么办？**
A: Bot对话中保留所有历史消息和文件，随时可以查看。

**Q: 文件太多了怎么办？**
A: 定期清理，或者只保留Air V7.8（最常用的分享版）。

**Q: 可以关闭某个版本的发送吗？**
A: 可以，修改代码中的 `config_files` 列表。

**Q: 收不到通知？**
A: 检查Bot Token和Chat ID是否正确，查看日志文件。

---

**享受自动化带来的便利！** 🎉

不再需要：
- ❌ 手动检查更新
- ❌ 手动下载订阅
- ❌ 手动生成配置
- ❌ 记得更新时间

只需要：
- ✅ 打开Telegram
- ✅ 下载配置
- ✅ 导入使用

**一切都是自动的！** 🚀
